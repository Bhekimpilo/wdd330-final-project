(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();let i;function M(e){i!=null&&i.remove(),i=L.map("map").setView([e.latitude,e.longitude],5),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),L.marker([e.latitude,e.longitude]).addTo(i).openPopup()}const I="a847532d1cd9e2b70dbecb541d4d1fb5",H="http://api.positionstack.com/v1/forward";async function O(e){const n=`${H}?access_key=${I}&query=${encodeURIComponent(e)}`,o=await(await fetch(n)).json();return!o.data||o.data.length===0?null:{name:o.data[0].name,country:o.data[0].country,latitude:o.data[0].latitude,longitude:o.data[0].longitude}}const h=document.querySelector(".question"),d=document.querySelector(".response"),_="https://opentdb.com/api.php",b=document.querySelector("#prev-qstns"),N=document.querySelector("#stats"),P=document.querySelector("#stat-head"),S=window.nlp;let u=localStorage.getItem("score"),p=localStorage.getItem("prev-qstns")||[],f=[],q=parseInt(u.split("/")[1]),v=parseInt(u.split("/")[0]);async function C(){try{const n=(await axios.get(`${_}?amount=1&category=22&difficulty=medium&type=multiple`)).data.results[0];return A(n),await Q(n.question,n.correct_answer)}catch(e){return console.log(e)}}function A(e){h.innerHTML="",d.innerHTML="",h.innerHTML=e.question;let n=e.incorrect_answers,s=e.correct_answer;n.includes(s)||n.push(s),n.sort(),p.length>0&&(f=JSON.parse(localStorage.getItem("prev-qstns"))||[]),k(e,n)}function k(e,n){n.forEach(s=>{const o=document.createElement("label"),t=document.createElement("input");t.classList.add("selector");const r=document.createElement("p");r.innerHTML=s,t.type="radio",t.name="options",t.value=s,t.addEventListener("change",()=>{document.querySelectorAll('input[name="options"]').forEach(l=>l.disabled=!0);let g=!1;q++,e.correct_answer===t.value?(d.style.backgroundColor="#cbf7d5",g=!0,v++):d.style.backgroundColor="#ffdcd8ff",f.push({question:e.question,correct:g}),localStorage.setItem("prev-qstns",JSON.stringify(f.slice(-5))),p=JSON.parse(localStorage.getItem("prev-qstns"));const y=document.createElement("ul");let a;p.length>0&&p.forEach(l=>{const m=document.createElement("li");a=document.createElement("span"),m.innerHTML=l.question,a.innerHTML=l.correct?"✓":"✕",a.style.color=l.correct?"green":"red",a.style.marginLeft="0.5rem",m.appendChild(a),y.appendChild(m)}),b.innerHTML="",b.appendChild(y),u=localStorage.setItem("score",`${v}/${q}`),J()}),o.appendChild(t),o.append(r),d.appendChild(o)})}function J(){P.style.display="block",u=localStorage.getItem("score");const e=u.split("/"),n=e[0],s=e[1];N.innerHTML=`<p>Total: &nbsp;&nbsp;${s}</p> <br> <p>Correct:&nbsp;&nbsp; ${n}</p> <br> <p>Wrong: &nbsp;&nbsp;${s-n} </p>`}async function Q(e,n){let o=S(e).places().out("array");return o.length==0&&(o=S(n).places().out("array")),o.length>0?O([...o]):{country:"South Africa",latitude:-25.7531683,longitude:28.1595743,name:"Africa"}}const w=document.querySelector(".menu"),R=document.querySelector(".menu-list"),U=document.querySelector(".year"),x=document.querySelector("#stats"),z=document.querySelector("#stat-head"),F=document.querySelector(".response"),E=document.querySelector("#prev-qstns"),K=document.querySelector("button");let $=localStorage.getItem("score"),W=localStorage.getItem("prev-qstns");C().then(e=>M(e));var T;if(!$)z.style.display="none";else{const e=$.split("/"),n=e[0],s=e[1];x.innerHTML=`<p>Total: &nbsp;&nbsp;${s}</p> <br> <p>Correct:&nbsp;&nbsp; ${n}</p> <br> <p>Wrong: &nbsp;&nbsp;${s-n} </p>`;let o=document.createElement("ul");(T=JSON.parse(W))==null||T.forEach(t=>{const r=document.createElement("li");let c=document.createElement("span");r.innerHTML=t.question,c.innerHTML=t.correct?"✓":"✕",c.style.color=t.correct?"green":"red",c.style.marginLeft="0.5rem",r.appendChild(c),o.appendChild(r)}),E.innerHTML="",E.appendChild(o)}K.addEventListener("click",async()=>{F.style.backgroundColor="",await C().then(e=>M(e))});w.addEventListener("click",()=>{w.classList.toggle("open"),R.classList.toggle("show")});U.innerHTML=`${new Date().getFullYear()}`;
