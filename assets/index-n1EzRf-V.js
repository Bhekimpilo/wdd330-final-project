(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();let u;function C(e){u!=null&&u.remove(),u=L.map("map").setView([e.latitude,e.longitude],5),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(u),L.marker([e.latitude,e.longitude]).addTo(u).openPopup()}const H="a847532d1cd9e2b70dbecb541d4d1fb5",O="http://api.positionstack.com/v1/forward";async function _(e){const n=`${O}?access_key=${H}&query=${encodeURIComponent(e)}`,o=await(await fetch(n)).json();return!o.data||o.data.length===0?null:{name:o.data[0].name,country:o.data[0].country,latitude:o.data[0].latitude,longitude:o.data[0].longitude}}const h=document.querySelector(".question"),d=document.querySelector(".response"),N="https://opentdb.com/api.php",b=document.querySelector("#prev-qstns"),P=document.querySelector("#stats"),A=document.querySelector("#stat-head"),$=document.querySelector("button"),S=window.nlp;let a=localStorage.getItem("score"),p=localStorage.getItem("prev-qstns")||[],f=[],q=parseInt(a==null?void 0:a.split("/")[1])||0,v=parseInt(a==null?void 0:a.split("/")[0])||0;async function I(){try{const n=(await axios.get(`${N}?amount=1&category=22&difficulty=medium&type=multiple`)).data.results[0];return k(n),await R(n.question,n.correct_answer)}catch(e){return console.log(e)}}function k(e){h.innerHTML="",d.innerHTML="",h.innerHTML=e.question;let n=e.incorrect_answers,s=e.correct_answer;n.includes(s)||n.push(s),n.sort(),p.length>0&&(f=JSON.parse(localStorage.getItem("prev-qstns"))||[]),$.disabled=!0,J(e,n)}function J(e,n){n.forEach(s=>{const o=document.createElement("label"),t=document.createElement("input");t.classList.add("selector");const r=document.createElement("p");r.innerHTML=s,t.type="radio",t.name="options",t.value=s,t.addEventListener("change",()=>{document.querySelectorAll('input[name="options"]').forEach(i=>i.disabled=!0),$.disabled=!1;let g=!1;q++,e.correct_answer===t.value?(d.style.backgroundColor="#cbf7d5",g=!0,v++):d.style.backgroundColor="#ffdcd8ff",f.push({question:e.question,correct:g}),localStorage.setItem("prev-qstns",JSON.stringify(f.slice(-5))),p=JSON.parse(localStorage.getItem("prev-qstns"));const y=document.createElement("ul");let l;p.length>0&&p.forEach(i=>{const m=document.createElement("li");l=document.createElement("span"),m.innerHTML=i.question,l.innerHTML=i.correct?"✓":"✕",l.style.color=i.correct?"green":"red",l.style.marginLeft="0.5rem",m.appendChild(l),y.appendChild(m)}),b.innerHTML="",b.appendChild(y),a=localStorage.setItem("score",`${v}/${q}`),Q()}),o.appendChild(t),o.append(r),d.appendChild(o)})}function Q(){A.style.display="block",a=localStorage.getItem("score");const e=a.split("/"),n=e[0],s=e[1];P.innerHTML=`<p>Total: &nbsp;&nbsp;${s}</p> <br> <p>Correct:&nbsp;&nbsp; ${n}</p> <br> <p>Wrong: &nbsp;&nbsp;${s-n} </p>`}async function R(e,n){let o=S(e).places().out("array");return o.length==0&&(o=S(n).places().out("array")),o.length>0?_([...o]):{country:"South Africa",latitude:-25.7531683,longitude:28.1595743,name:"Africa"}}const w=document.querySelector(".menu"),U=document.querySelector(".menu-list"),x=document.querySelector(".year"),z=document.querySelector("#stats"),F=document.querySelector("#stat-head"),K=document.querySelector(".response"),E=document.querySelector("#prev-qstns"),W=document.querySelector("button");let T=localStorage.getItem("score"),Y=localStorage.getItem("prev-qstns");I().then(e=>C(e));var M;if(!T)F.style.display="none";else{const e=T.split("/"),n=e[0],s=e[1];z.innerHTML=`<p>Total: &nbsp;&nbsp;${s}</p> <br> <p>Correct:&nbsp;&nbsp; ${n}</p> <br> <p>Wrong: &nbsp;&nbsp;${s-n} </p>`;let o=document.createElement("ul");(M=JSON.parse(Y))==null||M.forEach(t=>{const r=document.createElement("li");let c=document.createElement("span");r.innerHTML=t.question,c.innerHTML=t.correct?"✓":"✕",c.style.color=t.correct?"green":"red",c.style.marginLeft="0.5rem",r.appendChild(c),o.appendChild(r)}),E.innerHTML="",E.appendChild(o)}W.addEventListener("click",async()=>{K.style.backgroundColor="",await I().then(e=>C(e))});w.addEventListener("click",()=>{w.classList.toggle("open"),U.classList.toggle("show")});x.innerHTML=`${new Date().getFullYear()}`;
